<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2018-10-30 周二 01:01 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Spring Web MVC</title>
<meta name="generator" content="Org mode">
<meta name="author" content="某某人">
<link rel='stylesheet' href='/asset/common.css' />
<script src='https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js'></script>
<script src='https://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js'></script>
<script src='/asset/common.js'></script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">Spring Web MVC</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orge1e9c8c">1. 基本配置</a></li>
<li><a href="#org8781caf">2. DispatcherServlet</a></li>
<li><a href="#org7a9c2ef">3. Controller</a>
<ul>
<li><a href="#orgd88fcb8">3.1. hello, world</a></li>
<li><a href="#orgc634fc2">3.2. RequestMapping</a></li>
<li><a href="#orgd3c04a6">3.3. Handler 参数</a></li>
<li><a href="#orgd2089fd">3.4. Handler 返回值</a></li>
</ul>
</li>
<li><a href="#orgd911126">4. Controller 相关</a>
<ul>
<li><a href="#org90ea1dc">4.1. RedirectionAttributes</a></li>
<li><a href="#org3c70edb">4.2. @ModelAttribute</a></li>
<li><a href="#org2af6a42">4.3. 操作 HttpSession</a></li>
</ul>
</li>
<li><a href="#orgdb82f02">5. Conversion (类型转换)</a></li>
<li><a href="#org1c07f70">6. Validation (验证)</a></li>
<li><a href="#orge73402d">7. Exception (异常处理)</a></li>
<li><a href="#org450985c">8. View</a></li>
<li><a href="#orgbb67b3f">9. File Upload (文件上传)</a></li>
<li><a href="#orgc1f20f2">10. I18N (国际化)</a></li>
<li><a href="#orgebf81a0">11. RESTful</a></li>
</ul>
</div>
</nav>



<section id="outline-container-orge1e9c8c" class="outline-2">
<h2 id="orge1e9c8c"><span class="section-number-2">1</span> 基本配置</h2>
<div class="outline-text-2" id="text-1">
<p>
在 Web.xml 中配置前端控制器，让 Spring MVC 拦截处理所有的请求:
</p>
<div class="org-src-container">
<pre class="src src-sgml">&lt;<span class="org-function-name">servlet</span>&gt;
  &lt;<span class="org-function-name">servlet-name</span>&gt;web&lt;/<span class="org-function-name">servlet-name</span>&gt;
  &lt;<span class="org-function-name">servlet-class</span>&gt;org.springframework.web.servlet.DispatcherServlet&lt;/<span class="org-function-name">servlet-class</span>&gt;
  &lt;<span class="org-function-name">init-param</span>&gt;
    &lt;<span class="org-function-name">param-name</span>&gt;contextConfigLocation&lt;/<span class="org-function-name">param-name</span>&gt;
    &lt;<span class="org-function-name">param-value</span>&gt;classpath:spring/web-mvc.xml&lt;/<span class="org-function-name">param-value</span>&gt;
  &lt;/<span class="org-function-name">init-param</span>&gt;
  &lt;<span class="org-function-name">load-on-startup</span>&gt;1&lt;/<span class="org-function-name">load-on-startup</span>&gt;
&lt;/<span class="org-function-name">servlet</span>&gt;
&lt;<span class="org-function-name">servlet-mapping</span>&gt;
  &lt;<span class="org-function-name">servlet-name</span>&gt;web&lt;/<span class="org-function-name">servlet-name</span>&gt;
  &lt;<span class="org-function-name">url-pattern</span>&gt;/&lt;/<span class="org-function-name">url-pattern</span>&gt;
&lt;/<span class="org-function-name">servlet-mapping</span>&gt;
</pre>
</div>

<p>
Spring MVC 在启动的时候会初始化容器，所以需要通过 xml 配置其容器的初始化。Spring-Mvc.xml:
</p>
<div class="org-src-container">
<pre class="src src-sgml"><span class="org-comment-delimiter">&lt;!--</span><span class="org-comment">&#21551;&#29992;&#27880;&#35299;&#25195;&#25551;</span><span class="org-comment-delimiter">--&gt;</span>
&lt;<span class="org-sgml-namespace">context</span>:<span class="org-function-name">component-scan</span> <span class="org-variable-name">base-package</span>=<span class="org-string">"com.nf147.post.controller"</span> /&gt;

<span class="org-comment-delimiter">&lt;!--</span><span class="org-comment">&#21551;&#29992; mvc &#30340;&#24120;&#29992;&#27880;&#35299;</span><span class="org-comment-delimiter">--&gt;</span>
&lt;<span class="org-sgml-namespace">mvc</span>:<span class="org-function-name">annotation-driven</span> <span class="org-variable-name">enable-matrix-variables</span>=<span class="org-string">"true"</span> /&gt;

<span class="org-comment-delimiter">&lt;!--</span><span class="org-comment">&#23558;&#25152;&#26377;&#30340;&#38745;&#24577;&#36164;&#28304;&#20132;&#36824; Servlet &#22788;&#29702;</span><span class="org-comment-delimiter">--&gt;</span>
&lt;<span class="org-sgml-namespace">mvc</span>:<span class="org-function-name">default-servlet-handler</span> /&gt;

<span class="org-comment-delimiter">&lt;!--</span><span class="org-comment">&#37197;&#32622;&#36820;&#22238;&#39029;&#38754;</span><span class="org-comment-delimiter">--&gt;</span>
&lt;<span class="org-function-name">bean</span> <span class="org-variable-name">class</span>=<span class="org-string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;
  &lt;<span class="org-function-name">property</span> <span class="org-variable-name">name</span>=<span class="org-string">"viewClass"</span> <span class="org-variable-name">value</span>=<span class="org-string">"org.springframework.web.servlet.view.JstlView"</span> /&gt;
  &lt;<span class="org-function-name">property</span> <span class="org-variable-name">name</span>=<span class="org-string">"prefix"</span> <span class="org-variable-name">value</span>=<span class="org-string">"/WEB-INF/jsp/"</span> /&gt;
  &lt;<span class="org-function-name">property</span> <span class="org-variable-name">name</span>=<span class="org-string">"suffix"</span> <span class="org-variable-name">value</span>=<span class="org-string">".jsp"</span> /&gt;
&lt;/<span class="org-function-name">bean</span>&gt;
</pre>
</div>
</div>
</section>

<section id="outline-container-org8781caf" class="outline-2">
<h2 id="org8781caf"><span class="section-number-2">2</span> DispatcherServlet</h2>
<div class="outline-text-2" id="text-2">
<p>
前端控制器，所有来自客户端的请求，都会交由它去处理。
</p>

<p>
基本工作机制:
</p>
<ul class="org-ul">
<li></li>
</ul>
</div>
</section>

<section id="outline-container-org7a9c2ef" class="outline-2">
<h2 id="org7a9c2ef"><span class="section-number-2">3</span> Controller</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgd88fcb8" class="outline-3">
<h3 id="orgd88fcb8"><span class="section-number-3">3.1</span> hello, world</h3>
<div class="outline-text-3" id="text-3-1">
<p>
传统的方式：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-comment-delimiter">// </span><span class="org-comment">1. &#23454;&#29616; Controller &#25509;&#21475;</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">2. &#37325;&#20889; handleRequest &#26041;&#27861;</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">&#27880;&#24847;&#65292;&#26041;&#27861;&#30340;&#36820;&#22238;&#20540;&#26159; ModelAndView</span>
<span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">DemoController</span> <span class="org-keyword">implements</span> <span class="org-type">Controller</span> {
    <span class="org-c-annotation">@Override</span>
    <span class="org-keyword">public</span> <span class="org-type">ModelAndView</span> <span class="org-function-name">handleRequest</span>(<span class="org-type">HttpServletRequest</span> <span class="org-variable-name">request</span>, <span class="org-type">HttpServletResponse</span> <span class="org-variable-name">response</span>) <span class="org-keyword">throws</span> <span class="org-type">Exception</span> {
        <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">ModelAndView</span>(<span class="org-string">"demo"</span>, <span class="org-string">"msg"</span>, <span class="org-string">"hello, world"</span>);  <span class="org-comment-delimiter">// </span><span class="org-comment">&#36820;&#22238; demo &#39029;&#38754;&#65292;&#20250;&#22312; request &#37324;&#20445;&#23384;&#19968;&#20010; msg &#30340;&#21464;&#37327;&#65292;&#20540;&#20026; hello, world</span>
    }
}

<span class="org-comment-delimiter">// </span><span class="org-comment">&#28982;&#21518;&#65292;&#22312; spring-mvc.xml &#20013;&#28155;&#21152;:</span>
<span class="org-comment-delimiter">//   </span><span class="org-comment">&lt;bean name="/hello" value="xxx.DemoController" /&gt;</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">&#38543;&#21518;&#65292;&#23601;&#21487;&#20197;&#22312;&#27983;&#35272;&#22120;&#20013;&#35775;&#38382;&#20102;</span>
<span class="org-comment-delimiter">//   </span><span class="org-comment">http://localhost:8080/hello</span>
</pre>
</div>

<p>
可以使用相关注解简化其操作:
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-c-annotation">@Controller</span>
<span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">DemoController</span> {
    <span class="org-c-annotation">@RequestMapping</span>(<span class="org-string">"/"</span>)
    <span class="org-keyword">public</span> <span class="org-type">String</span> <span class="org-function-name">handleRequest</span>(<span class="org-type">Model</span> <span class="org-variable-name">model</span>) {
        model.addAttribute(<span class="org-string">"msg"</span>, <span class="org-string">"hello, world"</span>);
        <span class="org-keyword">return</span> <span class="org-string">"demo"</span>;
    }
}

<span class="org-comment-delimiter">// </span><span class="org-comment">&#36825;&#31181;&#20889;&#27861;&#36319;&#19978;&#38754;&#26159;&#31561;&#20215;&#30340;&#65292;&#19981;&#36807;&#26356;&#31616;&#21333;&#28165;&#29245;&#12290;&#24182;&#19988;&#19968;&#20010; Controller &#31867;&#37324;&#38754;&#21487;&#20197;&#25918;&#32622;&#22810;&#20010; handler</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">&#21478;&#22806;&#65292;&#27880;&#24847;&#65292;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#35201;&#24320;&#21551;&#27880;&#35299;&#25195;&#25551; &lt;context:component-scan .. /&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc634fc2" class="outline-3">
<h3 id="orgc634fc2"><span class="section-number-3">3.2</span> RequestMapping</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>@RequestMapping</li>
<li>@GetMapping</li>
<li>@PostMapping</li>
<li>@XxxMapping</li>
</ul>

<p>
参数:
</p>
<ul class="org-ul">
<li>name</li>
<li>required</li>
</ul>
</div>
</div>

<div id="outline-container-orgd3c04a6" class="outline-3">
<h3 id="orgd3c04a6"><span class="section-number-3">3.3</span> Handler 参数</h3>
<div class="outline-text-3" id="text-3-3">
<p>
特殊含义的参数:
</p>
<ul class="org-ul">
<li></li>
</ul>
</div>
</div>


<div id="outline-container-orgd2089fd" class="outline-3">
<h3 id="orgd2089fd"><span class="section-number-3">3.4</span> Handler 返回值</h3>
</div>
</section>

<section id="outline-container-orgd911126" class="outline-2">
<h2 id="orgd911126"><span class="section-number-2">4</span> Controller 相关</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org90ea1dc" class="outline-3">
<h3 id="org90ea1dc"><span class="section-number-3">4.1</span> RedirectionAttributes</h3>
</div>

<div id="outline-container-org3c70edb" class="outline-3">
<h3 id="org3c70edb"><span class="section-number-3">4.2</span> @ModelAttribute</h3>
</div>

<div id="outline-container-org2af6a42" class="outline-3">
<h3 id="org2af6a42"><span class="section-number-3">4.3</span> 操作 HttpSession</h3>
</div>
</section>

<section id="outline-container-orgdb82f02" class="outline-2">
<h2 id="orgdb82f02"><span class="section-number-2">5</span> Conversion (类型转换)</h2>
</section>
<section id="outline-container-org1c07f70" class="outline-2">
<h2 id="org1c07f70"><span class="section-number-2">6</span> Validation (验证)</h2>
</section>
<section id="outline-container-orge73402d" class="outline-2">
<h2 id="orge73402d"><span class="section-number-2">7</span> Exception (异常处理)</h2>
</section>
<section id="outline-container-org450985c" class="outline-2">
<h2 id="org450985c"><span class="section-number-2">8</span> View</h2>
</section>

<section id="outline-container-orgbb67b3f" class="outline-2">
<h2 id="orgbb67b3f"><span class="section-number-2">9</span> File Upload (文件上传)</h2>
</section>
<section id="outline-container-orgc1f20f2" class="outline-2">
<h2 id="orgc1f20f2"><span class="section-number-2">10</span> I18N (国际化)</h2>
</section>
<section id="outline-container-orgebf81a0" class="outline-2">
<h2 id="orgebf81a0"><span class="section-number-2">11</span> RESTful</h2>
</section>
</div>
<div id="postamble" class="status">
<p class="author">Author: 某某人</p>
<p class="date">Created: 2018-10-30 周二 01:01</p>
<p class="validation">Go ahead, never stop.</p>
</div>
</body>
</html>
